{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","request","axios","get","p","then","response","data","concat","newObject","post","id","delete","put","Filter","props","onChange","handleSearchChange","value","text","PersonForm","handleChange","handleSubmit","handleNumChange","newName","newNum","onSubmit","type","Persons","persons","map","person","key","name","number","onClick","handleDel","Notification","message","cls","className","App","useState","setPersons","setNewName","setNewNum","searchText","setSearchText","setMessage","setType","useEffect","personService","initPersons","check","personsFilter","filter","toLowerCase","includes","ev","target","preventDefault","some","window","confirm","find","changePerson","setTimeout","_newPerson","returnedPerson","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1d353f10.chunk.js","sourcesContent":["import axios from 'axios';\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  const p = {\r\n    \"name\": \"ddddddddddddddd\",\r\n    \"number\": \"39-23-6423122\",\r\n    \"id\": 9999\r\n  }\r\n  return request.then(response => response.data.concat(p))\r\n}\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst del_person = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  del_person,\r\n  update\r\n}","import React from 'react';\r\n\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input onChange={props.handleSearchChange} value={props.text} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = (props) => {\r\n  const { handleChange, handleSubmit, handleNumChange, newName, newNum } = props;\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNum} onChange={handleNumChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Persons = (props) => {\r\n  return (\r\n    <>\r\n      {\r\n        props.persons.map(person => (\r\n          <p key={person.id}>{person.name} - {person.number} <button onClick={() => props.handleDel(person.id)}>delete</button></p>\r\n        ))\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Persons;","import React from 'react';\r\n\r\nconst Notification = ({ type = 'success', message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  const cls = `notification ${type}`;\r\n\r\n  return (\r\n    <div className={cls}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification;","import React, { useState, useEffect } from 'react';\r\n\r\nimport personService from './services/persons';\r\nimport Filter from './components/Filter';\r\nimport PersonForm from './components/PersonForm';\r\nimport Persons from './components/Persons';\r\nimport Notification from './components/Notification';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNum, setNewNum] = useState('')\r\n  const [searchText, setSearchText] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n  const [type, setType] = useState('success')\r\n\r\n  const hook = () => {\r\n    personService\r\n      .getAll()\r\n      .then(initPersons => {\r\n        setPersons(initPersons)\r\n      })\r\n  }\r\n\r\n  useEffect(hook, [])\r\n\r\n  const handleSubmit = (ev) => {\r\n\r\n    ev.preventDefault()\r\n\r\n    if (!check()) {\r\n      return false;\r\n    }\r\n\r\n    if (persons.some((person) => person.name === newName)) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const p = persons.find((person => person.name === newName))\r\n        const changePerson = { ...p, number: newNum }\r\n\r\n        personService\r\n          .update(p.id, changePerson)\r\n          .then(response => {\r\n            setPersons(persons.map(person => person.id !== p.id ? person : response))\r\n            setNewName('')\r\n            setNewNum('')\r\n\r\n            setType('success')\r\n            setMessage(`update ${changePerson.name} number is ${changePerson.number}`)\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n\r\n          })\r\n\r\n        return false;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    const _newPerson = {\r\n      name: newName,\r\n      number: newNum\r\n    }\r\n\r\n    personService\r\n      .create(_newPerson)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n        setNewName('')\r\n        setNewNum('')\r\n\r\n        setType('success')\r\n        setMessage(`Added ${_newPerson.name}`)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000);\r\n      })\r\n      .catch(error => {\r\n        setType('error')\r\n        setMessage(error.response.data.error)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000);\r\n      })\r\n  }\r\n\r\n  const handleChange = (ev) => {\r\n    setNewName(ev.target.value)\r\n  }\r\n\r\n  const handleNumChange = ev => {\r\n    setNewNum(ev.target.value)\r\n  }\r\n\r\n  const handleSearchChange = ev => {\r\n    setSearchText(ev.target.value)\r\n  }\r\n\r\n  const check = () => {\r\n    if (newName === '') {\r\n      return false;\r\n    }\r\n\r\n    if (newNum === '') {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  const handleDel = (id) => {\r\n    const p = persons.find((person => person.id === id))\r\n    if (window.confirm(`Delete ${p.name}?`)) {\r\n      personService.del_person(id).then(() => {\r\n        setPersons(persons.filter(p => p.id !== id))\r\n\r\n        setType('success')\r\n        setMessage(`删除${p.name}成功`)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n\r\n\r\n      }).catch(error => {\r\n\r\n        setPersons(persons.filter(p => p.id !== id))\r\n\r\n        setType('error')\r\n        setMessage(`未找到${p.name}的数据`)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  const personsFilter = persons.filter(person => person.name.toLowerCase().includes(searchText.toLowerCase()))\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} type={type} />\r\n      <Filter handleSearchChange={handleSearchChange} text={searchText} />\r\n      <h3>Add a new</h3>\r\n      <PersonForm handleChange={handleChange} handleSubmit={handleSubmit} handleNumChange={handleNumChange} newName={newName} newNum={newNum} />\r\n      <h3>Numbers</h3>\r\n      <Persons persons={personsFilter} handleDel={handleDel} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom'\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}